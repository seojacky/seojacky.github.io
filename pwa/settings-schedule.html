<!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —Ä–æ–∑–∫–ª–∞–¥—É -->
<div id="schedule-settings-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–¥–∞–ª–∫–∏ -->
            <div class="bg-indigo-600 text-white p-4 rounded-t-lg">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg font-semibold flex items-center">
                        <i class="fas fa-cog mr-2"></i>
                        –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥—É
                    </h3>
                    <button id="close-schedule-modal" class="text-white hover:text-gray-200 transition-colors">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –º–æ–¥–∞–ª–∫–∏ -->
            <div class="p-6">
                <!-- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É -->
                <div id="schedule-error-message" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-triangle mr-2"></i>
                        <span id="schedule-error-text">–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</span>
                    </div>
                </div>

                <!-- –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è -->
                <div id="schedule-loading" class="hidden text-center py-4">
                    <div class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"></div>
                    <p class="mt-2 text-gray-600 dark:text-gray-400 text-sm">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
                </div>

                <!-- –§–æ—Ä–º–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å -->
                <form id="schedule-settings-form" class="space-y-4">
                    <!-- –í–∏–±—ñ—Ä —Ä–æ–ª—ñ -->
                    <div class="form-group">
                        <label for="user-role" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            <i class="fas fa-user mr-2 text-indigo-600"></i>
                            –û–±–µ—Ä—ñ—Ç—å —Ä–æ–ª—å:
                        </label>
                        <select id="user-role" name="userRole" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 dark:text-white">
                            <option value="">-- –û–±–µ—Ä—ñ—Ç—å —Ä–æ–ª—å --</option>
                            <option value="student">üë®‚Äçüéì –°—Ç—É–¥–µ–Ω—Ç</option>
                            <option value="teacher">üë®‚Äçüè´ –í–∏–∫–ª–∞–¥–∞—á</option>
                        </select>
                    </div>

                    <!-- –ë–ª–æ–∫ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ -->
                    <div id="student-flow" class="hidden space-y-4">
                        <!-- –§–∞–∫—É–ª—å—Ç–µ—Ç –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ -->
                        <div class="form-group">
                            <label for="student-faculty" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                <i class="fas fa-building mr-2 text-indigo-600"></i>
                                –§–∞–∫—É–ª—å—Ç–µ—Ç:
                            </label>
                            <select id="student-faculty" name="studentFaculty" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 dark:text-white">
                                <option value="">-- –û–±–µ—Ä—ñ—Ç—å —Ñ–∞–∫—É–ª—å—Ç–µ—Ç --</option>
                            </select>
                        </div>

                        <!-- –ì—Ä—É–ø–∞ -->
                        <div id="group-container" class="form-group hidden">
                            <label for="student-group" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                <i class="fas fa-users mr-2 text-indigo-600"></i>
                                –ì—Ä—É–ø–∞:
                            </label>
                            <select id="student-group" name="studentGroup" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 dark:text-white">
                                <option value="">-- –û–±–µ—Ä—ñ—Ç—å –≥—Ä—É–ø—É --</option>
                            </select>
                        </div>
                    </div>

                    <!-- –ë–ª–æ–∫ –¥–ª—è –≤–∏–∫–ª–∞–¥–∞—á—ñ–≤ -->
                    <div id="teacher-flow" class="hidden space-y-4">
                        <!-- –§–∞–∫—É–ª—å—Ç–µ—Ç –¥–ª—è –≤–∏–∫–ª–∞–¥–∞—á—ñ–≤ -->
                        <div class="form-group">
                            <label for="teacher-faculty" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                <i class="fas fa-building mr-2 text-indigo-600"></i>
                                –§–∞–∫—É–ª—å—Ç–µ—Ç:
                            </label>
                            <select id="teacher-faculty" name="teacherFaculty" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 dark:text-white">
                                <option value="">-- –û–±–µ—Ä—ñ—Ç—å —Ñ–∞–∫—É–ª—å—Ç–µ—Ç --</option>
                            </select>
                        </div>

                        <!-- –ö–∞—Ñ–µ–¥—Ä–∞ -->
                        <div id="cafedra-container" class="form-group hidden">
                            <label for="teacher-cafedra" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                <i class="fas fa-sitemap mr-2 text-indigo-600"></i>
                                –ö–∞—Ñ–µ–¥—Ä–∞:
                            </label>
                            <select id="teacher-cafedra" name="teacherCafedra" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 dark:text-white">
                                <option value="">-- –û–±–µ—Ä—ñ—Ç—å –∫–∞—Ñ–µ–¥—Ä—É --</option>
                            </select>
                        </div>

                        <!-- –í–∏–∫–ª–∞–¥–∞—á -->
                        <div id="teacher-container" class="form-group hidden">
                            <label for="teacher-select" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                <i class="fas fa-chalkboard-teacher mr-2 text-indigo-600"></i>
                                –í–∏–∫–ª–∞–¥–∞—á:
                            </label>
                            <select id="teacher-select" name="teacherSelect" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white dark:bg-gray-700 dark:text-white">
                                <option value="">-- –û–±–µ—Ä—ñ—Ç—å –≤–∏–∫–ª–∞–¥–∞—á–∞ --</option>
                            </select>
                        </div>
                    </div>

                    <!-- –ö–Ω–æ–ø–∫–∏ –¥—ñ–π -->
                    <div class="flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200 dark:border-gray-600">
                        <button type="button" id="cancel-schedule-settings" class="flex-1 px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 rounded-md transition-colors">
                            <i class="fas fa-times mr-2"></i>
                            –°–∫–∞—Å—É–≤–∞—Ç–∏
                        </button>
                        <button type="submit" id="save-schedule-settings" class="flex-1 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-save mr-2"></i>
                            –ó–±–µ—Ä–µ–≥—Ç–∏
                        </button>
                    </div>
                </form>

                <!-- –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è -->
                <div class="mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                    <div class="flex items-start">
                        <i class="fas fa-info-circle text-blue-500 mt-1 mr-2"></i>
                        <div class="text-sm text-blue-700 dark:text-blue-300">
                            <p class="font-medium mb-1">–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è:</p>
                            <ul class="list-disc list-inside space-y-1 text-xs">
                                <li>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –≤–∞—à–æ–º—É –ø—Ä–∏—Å—Ç—Ä–æ—ó</li>
                                <li>–î–ª—è –∑–º—ñ–Ω–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –º–æ–∂–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ü–µ –≤—ñ–∫–Ω–æ</li>
                                <li>–†–æ–∑–∫–ª–∞–¥ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ–≥–æ API —É–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç—É</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –°—Ç–∏–ª—ñ –¥–ª—è –º–æ–¥–∞–ª–∫–∏ (–¥–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–æ Tailwind) -->
<style>
    /* –ü–ª–∞–≤–Ω–∞ –∞–Ω—ñ–º–∞—Ü—ñ—è –ø–æ—è–≤–∏ –º–æ–¥–∞–ª–∫–∏ */
    #schedule-settings-modal {
        backdrop-filter: blur(2px);
        transition: opacity 0.3s ease;
    }
    
    #schedule-settings-modal.show {
        opacity: 1;
    }
    
    /* –ê–Ω—ñ–º–∞—Ü—ñ—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ */
    #schedule-settings-modal .bg-white {
        transform: scale(0.95);
        transition: transform 0.3s ease;
    }
    
    #schedule-settings-modal.show .bg-white {
        transform: scale(1);
    }
    
    /* –°—Ç–∏–ª—ñ –¥–ª—è select-—ñ–≤ */
    select:focus {
        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }
    
    /* –°—Ç–∏–ª—ñ –¥–ª—è —Ç–µ–º–Ω–æ—ó —Ç–µ–º–∏ */
    @media (prefers-color-scheme: dark) {
        #schedule-settings-modal select option {
            background-color: #374151;
            color: #f9fafb;
        }
    }
    
    /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ —Å—Ç–∏–ª—ñ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö */
    @media (max-width: 640px) {
        #schedule-settings-modal .max-w-md {
            max-width: 95vw;
            margin: 0.5rem;
        }
        
        #schedule-settings-modal .p-6 {
            padding: 1rem;
        }
        
        #schedule-settings-modal .p-4 {
            padding: 1rem;
        }
    }
    
    /* –ö–∞—Å—Ç–æ–º–Ω—ñ —Å—Ç–∏–ª—ñ –¥–ª—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è */
    .animate-spin {
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        from {
            transform: rotate(0deg);
        }
        to {
            transform: rotate(360deg);
        }
    }
    
    /* –°—Ç–∏–ª—ñ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä–∏—Ç—Ç—è */
    #close-schedule-modal:hover {
        transform: scale(1.1);
        transition: transform 0.2s ease;
    }
</style>